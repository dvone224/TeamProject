<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.smartReciFit.mybatis.user.UserMapper">
<resultMap id="userResultMap" type="user">
   <id property="userNum" column="user_num"/>
  <result property="userName" column="user_name"/>
  <result property="userId" column="user_id"/>
  <result property="userNickName" column="user_nickname"/>
  <result property="userPw" column="user_pwd"/>
  <result property="userEmail" column="user_email"/>
  <result property="userPhone" column="user_phone"/>
  <result property="userImg" column="user_img"/>
</resultMap>

	<select id="getUserList" resultType="HashMap">
		select * from user
	</select>

	<select id="userLogin" parameterType="user" resultType="String">
		SELECT user_id FROM user WHERE user_id = #{userId} AND user_pwd =#{userPw}
	</select>

	
	<!-- 유저 삽입 -->
	<insert id="userJoin" parameterType="user">
    insert into user(user_name, user_id, user_nickname, user_pwd, user_email, user_phone, user_img)
    values (#{userName}, #{userId}, #{userNickName}, #{userPw}, #{userEmail}, #{userPhone}, #{userImg})
    </insert>
    
    <!-- 아이디로 num 찾기 -->
    <select id="IdGetUserNum" parameterType="String" resultType="Integer">
	select user_num from user where user_id=#{id}
	</select>
	
    <!-- 닉네임으로 num 찾기 -->
	<select id="nickNameGetUserNum" parameterType="String" resultType="Integer">
	select user_num from user where user_nickname=#{nickName}
	</select>
	
    <!-- num으로 유저찾기 -->
	<select id="numGetUser" parameterType="Integer" resultMap="userResultMap">
	select * from user where user_num=#{num2}
	</select>
	
    <!-- num으로 이름찾기 -->
	<select id="numGetName" parameterType="Integer" resultType="String">
	select user_name from user where user_num=#{num2}
	</select>
	
   <!-- social에 넣을 마지막 userNum 추출 -->
   <select id="getLastInsertuserNum" resultType="Integer">
   SELECT user_num
   FROM user
   ORDER BY user_num DESC
   LIMIT 1;
   </select>
	
</mapper>